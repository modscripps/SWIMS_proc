function err=GetNewFiles(SW)%Copy the latest files from the remote directory.%The routine checks to see if the number of files (containing the proper string) is the %same in the remote and local directories.  If it is the %same, then the only changes that can have taken place are %to the last file, so the routine copies the last.  If there%is one more file in the remote directory, then we need to copy%two files since Dave could have modified the 2nd-to-last and begun another.%%The paths are all specified in SW.%save old directoryolddir=pwd;%First do indexes.  We need two files.remotepath=SW.remoteindexdir;localpath=SW.localindexdir;eval(['cd ''' remotepath ''''])file1='ADCP_ps02_matfiles.mat';file2='SWIMS_ps02_gridfiles.mat';disp 'Copying index files from remote machine...'eval(['!copy ' file1 ' ' localpath]);eval(['!copy ' file2 ' ' localpath]);disp 'Done.'%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%Next get the most recent ADCP filesremotepath=SW.remotedata_pathADCP;localpath=SW.data_pathADCP;%eval(['cd ''' localpath ''''])b=dir;numlocfiles=0;for c=1:length(b)    if ~isempty(strfind(b(c).name,'ADCP'))        numlocfiles=numlocfiles+1;    endend%numlocfiles=length(b);eval(['cd ''' remotepath ''''])a=dir;numfiles=0;for c=1:length(a)    if ~isempty(strfind(a(c).name,'ADCP'))        numfiles=numfiles+1;        inds(numfiles)=c;    endend%numfiles=length(a);disp 'Copying ADCP files from remote machine...'if numfiles>numlocfiles    file1=a(inds(numfiles-1)).name;    eval(['!copy ' file1 ' ' localpath]);end    file1=a(inds(numfiles)).name;eval(['!copy ' file1 ' ' localpath]);disp 'Done.'%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%Next get the most recent SWIMS grid filesremotepath=SW.remotedata_pathSWIMS;localpath=SW.data_pathSWIMS;%eval(['cd ''' localpath ''''])b=dir;numlocfiles=0;for c=1:length(b)    if ~isempty(strfind(b(c).name,'SWIMS'))        numlocfiles=numlocfiles+1;    endend%numlocfiles=length(b);eval(['cd ''' remotepath ''''])a=dir;numfiles=0;for c=1:length(a)    if ~isempty(strfind(a(c).name,'SWIMS'))        numfiles=numfiles+1;        inds(numfiles)=c;    endend%numfiles=length(a);disp 'Copying SWIMSgrid files from remote machine...'if numfiles>numlocfiles    file1=a(inds(numfiles-1)).name;    eval(['!copy ' file1 ' ' localpath]);endfile1=a(inds(numfiles)).name;eval(['!copy ' file1 ' ' localpath]);disp 'Done.'%Get back to where we wereeval(['cd ''' olddir ''''])err=0;